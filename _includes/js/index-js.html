<script>{% assign carousel-items = site.data.index-carousel %}
    /* add item data */
    // title,text,src,btn,link
    var carouselItems = {{ carousel-items | jsonify }};
    
    /* shuffle items */
    carouselItems.sort(function() { return 0.5 - Math.random() });
    /* Sort the array, putting priority items first */
    carouselItems.sort((a, b) => {
        // If both items have the same value, maintain original order
        if (a.priority === b.priority) {
            return 0;
        }
        // Prioritize items with priority true
        return a.priority == "true" ? -1 : 1;
    });

    /* add items to carousel */
    var carousel = document.getElementById("carouselInner");
    var carouselIndicators = document.getElementById("carouselIndicators");
    var slides = "";
    var indicators = "";
    var i;
    for (i=0; i < {{ carousel-items | size }}; i++) { 
        // create indicator 
        indicator = `<button type="button" data-bs-target="#imageCarousel" data-bs-slide-to="${i.toString()}" ${ i == 0 ? 'class="active" aria-current="true" ' : '' }aria-label="Slide ${i.toString()}"></button>`;
        // create slide
        slide = `<div class="carousel-item rounded${ i == 0 ? ' active' : '' }" >
            <img src="https://objects.lib.uidaho.edu/ipa-mhs/${carouselItems[i].src}" alt="" class="d-block h-100 m-auto">
            <div class="carousel-caption bg-dark bg-opacity-75 rounded p-3 text-start mb-3">
                <h3 class="text-white py-2">${carouselItems[i].title}</h3>
                <div class="row">
                    <div class="col-md-9">
                    <p class="d-none d-md-block text-white">${carouselItems[i].text}</p>
                    </div>
                    <div class="col-md-3">
                    <p class="text-center"><a href="${carouselItems[i].link}" class="btn btn-lg btn-outline-primary text-white">${carouselItems[i].btn}</a></p>
                    </div>
                </div>
            </div></div>`;
        slides += slide;
        indicators += indicator;
    }
    // add indicators to page 
    carouselIndicators.innerHTML = indicators;
    // add slides to the page
    carousel.innerHTML = slides;
</script>